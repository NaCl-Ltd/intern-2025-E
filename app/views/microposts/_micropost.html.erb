<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content">
    <%= micropost.content %>
    <% if micropost.image.attached? %>
      <%= image_tag micropost.image.variant(:display) %>
    <% end %>
  </span>
  <span class="timestamp">
    <% if micropost.pinned? %>
      ðŸ“Œ <strong><%= t('post.pin') %></strong> â€¢
    <% end %>

    Posted <%= time_ago_in_words(micropost.created_at) %> ago.

    <!-- show pin/unpin buttons only for post owner -->
    <% if micropost.can_be_pinned_by?(current_user) %>
      <% if micropost.pinned? %>
        <%= button_to t('post.unpin'), unpin_micropost_path(micropost), 
                      method: :patch, 
                      data: { confirm: "Unpin this post?" },
                      class: "btn btn-sm btn-outline-secondary" %>
      <% else %>
        <%= button_to t('post.pin'), pin_micropost_path(micropost), 
                      method: :patch, 
                      data: { confirm: "Pin this post to the top?" },
                      class: "btn btn-sm btn-outline-primary" %>
      <% end %>
    <% end %>

    <% if current_user?(micropost.user) %>
      <%= link_to t('post.delete'), micropost, data: { "turbo-method": :delete,
                                               turbo_confirm: "You sure?" } %>
    <% end %>
  </span>
</li>
