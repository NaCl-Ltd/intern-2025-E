<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <!-- Show daily prompt question if this is a response -->
  <% if micropost.is_daily_prompt_response? %>
    <div class="daily_prompt-indicator mb-2">
      <span class="badge badge-info">
        üìù <%= t('post.daily_prompt_response') %>
      </span>
      <div class="daily-prompt-question">
        <em><%= micropost.daily_prompt_question %></em>
      </div>
    </div>
  <% end %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content">
    <%= micropost.content %>
    <% if micropost.image.attached? %>
      <%= image_tag micropost.image.variant(:display) %>
    <% end %>
  </span>
  <span class="timestamp">

    <% if micropost.pinned? %>
      üìå <strong><%= t('post.pin') %></strong> ‚Ä¢
    <% end %>

    <%= t('post.posted') %> <%= time_ago_in_words(micropost.created_at) %> <%= t('post.ago') %>.

    <!-- show pin/unpin buttons only for post owner -->
    <% if micropost.can_be_pinned_by?(current_user) %>
      <% if micropost.pinned? %>
        <%= button_to t('post.unpin'), unpin_micropost_path(micropost), 
                      method: :patch, 
                      data: { confirm: "Unpin this post?" },
                      class: "btn btn-sm btn-outline-secondary" %>
      <% else %>
        <%= button_to t('post.pin'), pin_micropost_path(micropost), 
                      method: :patch, 
                      data: { confirm: "Pin this post to the top?" },
                      class: "btn btn-sm btn-outline-primary" %>
      <% end %>
    <% end %>

    <% if current_user?(micropost.user) %>
      <%= link_to t('post.delete'), micropost, data: { "turbo-method": :delete,
                                               turbo_confirm: "You sure?" } %>
    <% end %>
  </span>
</li>
